<!--

    JBoss, Home of Professional Open Source.
    Copyright 2014 Red Hat, Inc., and individual contributors
    as indicated by the @author tags.

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.

-->
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Project Newcastle</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="lib.css" />
    <link rel="stylesheet" href="index.css" />

    <script src="config.js"></script>
    <script src="lib.js"></script>
    <script src="index.js"></script>

  </head>
  <body>
    <nav class="navbar navbar-default navbar-pf" role="navigation" ng-cloak>
      <!-- header -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href ui-sref="dashboard">
          <img src="images/pnc-logo-text.svg" alt="Newcastle Build System" />
        </a>
      </div>
      <div class="collapse navbar-collapse navbar-collapse-1">
        <!-- user menu -->
          <ul class="nav navbar-nav navbar-utility">
            <!-- user's guide link -->
            <li ng-controller="userGuideController as userGuideCtrl" id="user-guide" ng-show="userGuideCtrl.url">
              <a href="{{ userGuideCtrl.url }}" target="_blank" class="user-guide-link" data-toggle="popover" data-placement="bottom" data-html="true" data-content="Please visit our User's guide for more information about using the Project Newcastle.<div class='m-t-5 text-center'><span class='user-guide-close cursor-pointer c-blue'>Close</span></div>">
                <span class="fa fa-question-circle-o"></span> User's guide
              </a>
            </li>
            <!-- default configuration warning icon -->
            <li ng-controller="defaultConfigurationController as defaultConfigurationCtrl" ng-show="defaultConfigurationCtrl.isDefaultConfiguration" title="{{ defaultConfigurationCtrl.title }}">
              <a href="#" data-toggle="modal" data-target="#defaultConfigurationModal">
                <span class="pficon pficon-warning-triangle-o"></span>
              </a>
            </li>
            <!-- notification bell -->
            <li class="drawer-pf-trigger dropdown" ng-controller="pncDrawerNotificationController">
              <a class="nav-item-iconic drawer-pf-trigger-icon" ng-click="toggleShowDrawer()">
                <span class="fa" ng-class="hasDrawerNotifications() ? 'fa-bell': 'fa-bell-o'" title="Notifications"></span>
              </a>
              <!-- show notification drawer -->
              <div class="layout-pf-fixed">
                <div class="navbar-pf-vertical">
                  <pf-notification-drawer
                       drawer-hidden="hideDrawer"
                       drawer-title="Notifications Drawer"
                       allow-expand="true"
                       action-button-title="Mark All Read"
                       action-button-callback="markAllAsRead"
                       notification-groups="groups"
                       heading-include="common/notifications/views/heading.html"
                       subheading-include="common/notifications/views/subheading.html"
                       notification-body-include="common/notifications/views/notification-body.html"
                       notification-footer-include="common/notifications/views/notification-footer-include.html"
                       custom-scope="customScope">
                  </pf-notification-drawer>
                </div>
              </div>
            </li>
            <li ng-controller="authenticationController as authCtrl" class="dropdown" ng-show="authCtrl.isAuthenticated()">
                  <a href class="dropdown-toggle" data-toggle="dropdown">
                    <span class="pficon pficon-user"></span><span id="username">{{ authCtrl.username }}</span><b class="caret"></b>
                  </a>
                  <ul class="dropdown-menu">
                    <li>
                      <a href id="logout-button" ng-click="authCtrl.logout()">Logout</a>
                    </li>
                  </ul>
            </li>
            <li ng-controller="authenticationController as authCtrl">
              <a href id="login-button" ng-hide="authCtrl.isAuthenticated()"  ng-click="authCtrl.login()"><span class="pficon pficon-user"></span>Login</a>
            </li>
          </ul>
        <ul class="nav navbar-nav navbar-primary" ng-controller="menuController as ctr">
          <li ui-sref-active="active">
            <a ui-sref="dashboard" href>Dashboard</a>
          </li>
          <li ui-sref-active="active">
            <a ui-sref="product.list" href>Products</a>
          </li>
          <li ui-sref-active="active">
            <a href ui-sref="projects.list">Projects</a>
          </li>
          <li ui-sref-active="active">
            <a href ui-sref="build-groups.list">Build Groups</a>
          </li>
          <li class="dropdown" ui-sref-active="active">
            <a href id="builds-dropdown-button" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Builds<span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
              <li ui-sref-active="active"><a href ui-sref="build-records.list">Builds</a></li>
              <li ui-sref-active="active"><a href ui-sref="configuration-set-record.list">Group Builds</a></li>
            </ul>
          </li>
          <li ui-sref-active="active">
            <a href ui-sref="build-configs.list">Build Configs</a>
          </li>
          <li ui-sref-active="active">
            <a href ui-sref="repository-configurations.list">Repositories</a>
          </li>
          <li class="dropdown" ui-sref-active="active">
            <a href class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Reports<span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
              <li ui-sref-active="active"><a href ui-sref="report.product-shipped">Whitelisted artifacts of products</a></li>
              <li ui-sref-active="active"><a href ui-sref="report.products-for-artifact">Products for whitelisted artifacts</a></li>
              <li ui-sref-active="active"><a href ui-sref="report.blacklisted-artifacts-in-project">Blacklisted artifacts in a project</a></li>
              <li ui-sref-active="active"><a href ui-sref="report.different-artifacts-in-products">Different artifacts between products</a></li>
              <li ui-sref-active="active"><a href ui-sref="report.built-artifacts-in-project">Built artifacts in a project</a></li>
              <li ui-sref-active="active"><a href ui-sref="report.project-product-diff">Diff a project against a product</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </nav>


    <div ng-show="::false" class="notification-area text-right">
      <span class="pficon spinner spinner-md spinner-inline"></span>
    </div>
    <div class="notification-area">

      <div ng-controller="pncToastNotificationController">
        <pf-toast-notification-list notifications="notifications" show-close="true" close-callback="handleClose"></pf-toast-notification-list>
      </div>
    </div>

    <div class="container-fluid" ng-cloak>
      <div class="row"> <!-- breadcrumbs -->
        <ui-breadcrumbs displayname-property="data.displayName" abstract-proxy-property="data.proxy" template-url="common/templates/uiBreadcrumbs.tpl.html"></ui-breadcrumbs>
      </div> <!-- /breadcrumbs -->
      <div ui-view="content"></div>
    </div>

    <div class="footer" ng-cloak>
      <div class="container">
        <div ng-include="'common/templates/footer.tmpl.html'"></div>
      </div><!-- /.container -->
    </div><!-- /.footer -->

    <!-- default configuration warning modal -->
    <div ng-controller="defaultConfigurationController as defaultConfigurationCtrl" class="modal fade" id="defaultConfigurationModal" tabindex="-1" role="dialog" aria-labelledby="defaultConfigurationLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
              <span class="pficon pficon-close"></span>
            </button>
            <h4 class="modal-title" id="defaultConfigurationLabel">{{ defaultConfigurationCtrl.title }}</h4>
          </div>
          <div class="modal-body">
            <p>Default configuration is used, it's <strong>not recommended</strong> to use this application as some features may not function as expected.</p>
            <p>Contact administrator to solve this problem. You can also reload the window and check top-right icon to see if the problem is still present.</p>
          </div>
        </div>
      </div>
    </div>

  </body>
</html>
